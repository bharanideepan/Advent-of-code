let y = `.|...?....
|.-.?.....
.....|-...
........|.
..........
.........?
..../.??..
.-.-/..|..
.|....-|.?
..//.|....`;
let x = `?......../......../.............?..-................||.......|.-./....|.|/................|?...-.......??..-..
.../.........?................?.-.........?...?........................./?................-......?.........|.-
-?......................../...?........................?....-.....................................|...........
|.../......?......................?/..-...|.?..............-.............../....|..../........|............?..
......../..................-....................././...................?../....................-..............
......|.....?...........|.................?................................................./........?......-.
........?...............-..........................................................?...../.../.-....?...?/....
......|......|.././............/...........................-....................................?.............
.....-......|.................|......................../...../....?..............-.........................|/.
.....?-..|................-....|......?.................|..-..-......................./.....|........-........
......../......................|....|...............|.....-?./...??.....|...-......................-..-..|....
.................................................../....-.........-...?..............?.........?.....|.......?
/...|............./.?.................................-...?-..............|..........?................||..../.
......|...-.............................................../....../............./..?...........................
-....................................?.../.....................-.../.......?.................-................
....../......?-......|..-..............-.................?....../..?..|..?.............................../....
............../............../.........|.......?./..............|?...-|......../..../....-.........--..../..-.
..?............|..?.................?........|.?......................?../.....-.....//.......................
?.......|......./........-.......||........-..........||..|.............?.?..-......?......../................
...........?.............|...-...........|.?-?...................|...................?.......|................
.........../....?.........-/........?../../.................................?................|/...............
/.....?..?....-.............................|.|..............-....|....-........../........./.................
..|...../....../.....?................./........../.....|.....................-../......./...-.............-..
..-.../............./...-...|.../........|.................---...........-..-......?.......-..................
......./......|..........-........?...........?..-./..........................................?.?.............
................/......................../.|.....?........|.-..|...|.........-.|..-......................?....
.........................-..........||...............-..-...................?..../.............|....?.|.......
.?..........................-....-...-.....................................|............?/............-.|..?/.
...-...............-.........................-..?||.............?..../....../............?.-.....?............
??......../............................/..........|........................................-....-...|.........
......?|.........?.....-/|................|....-.?......|-.?.........................|...................../..
.?..........-..........................?........../.|.................|/..........|..|.....?....-........../..
/..|.|.|............................/...|..............|.................../...../.??/...............-..-.....
..?.............|........................................-.................././...........-....?..............
..............................-......../.........../....|.............?.......|.....|.............-...........
....?|.............../................................?.|...../-.............?/.-..../..........-.............
.........|...............?................?........-...?..?............/......./......-............|..|.../...
..../.....-..../...-...?...............|..................|...................................-........?......
.............-...........-...........?....../.....?/......../..........?.................//.-.................
.....................-.|....|...-..........?...........-....-...-......|..............?.|./...................
.../?..|..........?...................|........../..............|?.............?..............|?-........?....
....................-............|............./.|/....-....?....-..................?./...?...?...............
.......................|...|./..............?.?......//...---....?........../..?..?..?..............?|........
....../..................../................../....................../.........|...|............-?............
.|...............-....?../-/............../......?.....-.........................../.../..-.................|.
....../...........?....../.../../......../.......|.........?........-../..-................../............../.
.?...............|.......|............|..........-....|.....?.....-......../.-.........?.-............/.....-.
..................-.......|..................-...?......../|...|....-............../.................././.-...
..............|......?.|/...-.........||.....?....|........-....-........-................../.....-.......?...
..................................-.....|...............................|......../......-........?..?../...|-.
.-..............?....|...................|....|.|........?-............/.../........../.|..................../
............|..............-............?...|..............................................?.||..-.....-......
...................|...........|......./.|..........................................?......-.../.......|.-....
..|..-............-..............?.............|.........?..../..................|............|........-...-|.
.............?......../............................||..-.|............?..........??.../.../.|..//............/
..............................?../....-..../..|...?.................|?..|........./.................../.......
....................?...............?......?..|..-...........................?........?.../......-....-.......
.......-....................................?..-.............?...?.?.......?............||?./...............-.
.....|..?..........|......?........-...............?..........?..?......../..........?..../.?|.-....-.........
.................?...-........?...|......................./.....?......./......../.....?.-...........-........
............?..-....?.-......-...?../?.-...................|......................?..............-......../...
../......./.....?-.?.................../......?....?...../..-.....?............./...........................|?
.................?../.?..-......................??....-...............-./-.|...|..|.|../....?..?......-...-...
........|..............|..........?-...../................//.....................................-............
|-....|......../-.?.||............|..........??.........../....................................../-......./...
-............................../............|?...././..................-.|..........-....-..|......?....|.....
......?.-..../.............?..-............................................-.....?...|...|........|..|........
.....--..|........||.-...///.....................................?......|.................?......../.-..?.....
......?....|.................../../..|/.............|........................-...........|.....?..............
./....-./..|..................?......?.?........./?|........................................./.......-...../..
.....|.......|-............./.|.............-........-................/........................-..|.?.........
../............|......|...........-..........?....|........................../..|............................/
..../...........|...............?.........|...|....|.............?...............-..|.....|.-.-.........?.|...
.............|..|....|...........................?.........||/-..-.?............?.......?../..............|...
.../?......|....//.....................-.../....................../............./|............................
.....-.-......|............?........-.........?.../.?............./....|.....?...-..|......./......?.....?/./.
......?/................../.............../....|.........-................-...|..../........-......./......|..
..-.|...................|...............................?.....................................................
.........?.....-?|.-|.........../..........................................?............./................/...
......|........?..|................?.........../....?........?.................?......?..............?........
?|................/......../.....?..........-..|.......-..............|...-............-................/?...?
?....|.........|........?....?......?...-....../..................?..............?......-.....................
......?.......?....................-......../.|.................|..........?..................|....-|.....|?..
.../.....................?......?.........?.............|.-.........?........?......................?.........
........|......-..../............??......-..........|...|/..............................|?....|.........?.....
....|........../............/.|..../....................................-.-...............-....-..............
............/......................................|...?..|.......................|.............../...........
......././/......-............................../.........?.-...-........../................/...-........-|...
./....-.|.........|..||.................................?............../.................../.............-....
...-/......./?....../?...|......-...........-...-.....-.-.|........................./................./.......
.........../.....................................?.........|.?............./.......................-.....|../.
..../..-........../.?.........|........................................./......./...............?.............
.....?............./............-..../-...?.?..../....................................../.............-.......
......./........-......-........../.|/.............../.....................-?..............................?..
......../....................-..............-..|.........?..................../........../....|.?.?...........
.........................../.|......................-..............-..............?.......?...................
.-............./|.........?......-.............../.../......?......../....?.............-...?.?.-.....-.......
-............./..--....??...?..-.|..........-.?-.?./.................||....-.....|.-.../....?.................
.........-|-......-........................-.....?...............-.../.......................-|..|..../.......
.....|....??........./.?.....|.-.?|........-..../.........../...............?...|.../|......|.................
....-................?...................../.?.?..|....-.|..........................?.....-...|.....?.........
.................................?...........................?.........../.-?............|......-..........?..
/......|............................|....................|...............-..............|.-......./....../....
|...|.........-..-...-.................|................../...|.......................?.......|./.............
...../.....|.....|............................/......-..........?.............?.//............................
..................-.-.?..........-...?..|......-................./...-.....................-..-..?...........?
..................?./-................?....|........................................-|........................
.................?...-.................-........./.......................-..........-................?........
.|../../................/.....|.............|.........................-..............?/..........|...........|
...........-.....?............./.......|.............|...../?-....-...../...?...?..............-|......?.?/.?.`;
const input = x.split("\n").map((line) => line.split(""));
const right = { x: 0, y: 1 };
const left = { x: 0, y: -1 };
const down = { x: 1, y: 0 };
const up = { x: -1, y: 0 };
const getGenergyCount = (start, lastMove) => {
  let count = 0;
  let paths = new Set();
  let visited = new Set();
  const findNext = ({ x, y }, { x: dx, y: dy }) => {
    let key = `${x},${y}:${dx},${dy}`;
    let coordinate = `${x},${y}`;
    let row = input[x];
    if (!row) return;
    let currentValue = row[y];
    if (!currentValue) return;
    if (visited.has(key)) return;
    visited.add(key);
    if (!paths.has(coordinate)) count++;
    paths.add(coordinate);
    const moveRight = () => findNext({ x, y: y + 1 }, right);
    const moveLeft = () => findNext({ x, y: y - 1 }, left);
    const moveDown = () => findNext({ x: x + 1, y }, down);
    const moveUp = () => findNext({ x: x - 1, y }, up);
    const fromLeft = dx === 0 && dy === 1;
    const fromRight = dx === 0 && dy === -1;
    const fromTop = dx === 1 && dy === 0;
    const fromBottom = dx === -1 && dy === 0;
    if (currentValue === ".") {
      if (fromLeft) moveRight();
      if (fromRight) moveLeft();
      if (fromTop) moveDown();
      if (fromBottom) moveUp();
    }
    if (currentValue === "|") {
      if (fromLeft || fromRight) {
        moveUp();
        moveDown();
      }
      if (fromTop) moveDown();
      if (fromBottom) moveUp();
    }
    if (currentValue === "-") {
      if (fromLeft) moveRight();
      if (fromRight) moveLeft();
      if (fromTop || fromBottom) {
        moveRight();
        moveLeft();
      }
    }
    if (currentValue === "/") {
      if (fromLeft) moveUp();
      if (fromRight) moveDown();
      if (fromTop) moveLeft();
      if (fromBottom) moveRight();
    }
    if (currentValue === "?") {
      if (fromLeft) moveDown();
      if (fromRight) moveUp();
      if (fromTop) moveRight();
      if (fromBottom) moveLeft();
    }
  };
  findNext(start, lastMove);
  return count;
};
const mock = [];
let result = 0;
let rowCount = input.length;
let columnCount = input[0].length;
for (let index = 0; index < 4; index++) {
  if (index === 0) {
    for (let i = 0; i < rowCount; i++) {
      const m = getGenergyCount({ x: i, y: 0 }, right);
      if (result < m) result = m;
    }
  }
  if (index === 1) {
    for (let i = 0; i < rowCount; i++) {
      const m = getGenergyCount({ x: i, y: columnCount - 1 }, left);
      if (result < m) result = m;
    }
  }
  if (index === 2) {
    for (let i = 0; i < columnCount; i++) {
      const m = getGenergyCount({ x: 0, y: i }, down);
      if (result < m) result = m;
    }
  }
  if (index === 3) {
    for (let i = 0; i < columnCount; i++) {
      const m = getGenergyCount({ x: rowCount - 1, y: i }, up);
      if (result < m) result = m;
    }
  }
}
console.log(result);
